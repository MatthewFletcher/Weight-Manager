<!DOCTYPE html>
<html>

<head>
	<title>All Entries</title>
	<link rel="stylesheet" href="/static/style.css">
	<script src="/static/script.js"></script>
</head>

<body>
	<div class="container">
		<h2>All Entries</h2>
		<form action="/delete" method="post" onsubmit="return confirmDelete();">
			<table>
				<tr>
					<th></th>
					<th>Name</th>
					<th>Room</th>
					<th>Weights</th>
					<th>Add Weight</th>
				</tr>
				{% for entry in entries %}
				<tr>
					<td><input type="checkbox" name="delete_ids" value="{{ entry[0] }}"></td>
					<td>{{ entry[1] }}</td>
					<td>{{ entry[2] }}</td>
					<td>{{ entry[3] }}</td>
					<td id="add-weight-cell-{{ entry[0] }}" style="vertical-align: middle;">
						<!-- Placeholder: the Add Weight form for this row will go here -->
					</td>
				</tr>
				{% endfor %}
			</table>
			<button type="submit">Delete Selected</button>
		</form>

		<!-- Now render all Add Weight forms outside the Delete form, 
		     and use a bit of JS to move them into the right cell after the page loads. -->
		{% for entry in entries %}
		<form action="/add_weight/{{ entry[0] }}" method="post" id="add-weight-form-{{ entry[0] }}"
			style="display:inline-flex; gap:0.5em; align-items:center; margin:0;">
			<input type="number" name="weight" step="0.1" required placeholder="New weight"
				style="padding:0.4em; border-radius:4px; border:1px solid #d2d2e6; width:90px;">
			<button type="submit" class="save-btn">Add Weight</button>
		</form>
		{% endfor %}

		<div class="nav-links">
			<a href="/">Back to form</a> |
			<a href="/report">Generate PDF Report</a>
		</div>
	</div>

<div id="entry-ids" data-ids="{% for entry in entries %}{{ entry[0] }}{% if not loop.last %},{% endif %}{% endfor %}"></div>
<script src="/static/script.js"></script>

</body>

</html>